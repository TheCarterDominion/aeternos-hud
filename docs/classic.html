<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Aeternos • Classic (Silk Safe MP3)</title>
<style>
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#04102a;color:#ecf3ff}
main{max-width:860px;margin:32px auto;padding:16px}
button{padding:14px 18px;margin:8px 8px 8px 0;border:2px solid #8cc2ff;border-radius:12px;background:#0b1734;color:#ecf3ff;font-size:16px}
label{display:block;margin:10px 0}
.pill{display:inline-block;border:1px solid #6e87b8;border-radius:999px;padding:6px 10px;margin:6px 8px 6px 0}
#pad{height:40vh;border:2px dashed #7aa2e3;border-radius:14px;margin-top:10px;display:flex;align-items:center;justify-content:center}
#log{white-space:pre-wrap;background:#0b1734;border:1px solid rgba(255,255,255,.25);padding:10px;border-radius:12px;margin-top:12px;max-height:30vh;overflow:auto}
</style>
</head>
<body>
<main>
  <h1>Aeternos • Classic (Silk Safe MP3)</h1>

  <div>
    <button id="btn-enable">Enable Audio</button>
    <button id="btn-beep">Beep</button>
    <label><input id="show-ctrls" type="checkbox"> Show native audio controls (fallback)</label>
    <span class="pill" id="state">Audio: Off</span>
  </div>

  <div>
    <button id="btn-tap">Tap Counter</button>
    <span class="pill">Taps: <b id="count">0</b></span>
    <span class="pill">Last: <b id="last">—</b></span>
  </div>

  <div id="pad">Tap inside this area</div>

  <audio id="beep" preload="auto" playsinline>
    <source src="media/beep.mp3" type="audio/mpeg">
  </audio>

  <div id="log" aria-live="polite"></div>
</main>

<script>
(function(){
  function g(id){return document.getElementById(id);}
  var B=g("beep"), S=g("show-ctrls"), state=g("state"), last=g("last"), cnt=g("count"), pad=g("pad"), logEl=g("log"), taps=0;
  function log(m){const t=new Date().toLocaleTimeString();logEl.textContent+="["+t+"] "+m+"\\n";logEl.scrollTop=logEl.scrollHeight;}
  function bump(){taps++;cnt.textContent=taps;}
  function bind(el,fn){if(!el)return;el.addEventListener("touchstart",e=>{fn();e.preventDefault();},{passive:false});el.addEventListener("click",fn);}
  bind(g("btn-tap"),bump);
  if(pad){bind(pad,bump);}
  if(S){S.addEventListener("change",()=>{if(B)B.controls=S.checked;});}
  function enable(){if(!B)return;try{B.currentTime=0;let p=B.play();if(p&&p.then)p.then(()=>{B.pause();state.textContent="Audio: On";log("Audio unlocked.");});}catch(e){log("Enable err:"+e);}}
  function beep(){if(!B)return;try{B.currentTime=0;let p=B.play();if(p&&p.catch)p.catch(()=>{});}catch(e){log("Beep err:"+e);}}
  bind(g("btn-enable"),enable);
  bind(g("btn-beep"),beep);
  window.addEventListener("pointerdown",()=>{last.textContent="pointerdown";});
  log("Ready. Tap Enable Audio once, then Beep.");
})();
</script>
</body>
</html>
