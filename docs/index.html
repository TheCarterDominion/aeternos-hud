<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Aeternos HUD — tap to slice</title>
<style>
  :root{--ink:#eaf2ff;--mut:#9fb3cc;--a:#62d3ff;--b:#ff49f0;--panel:#0f1a33}
  html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 50% 10%, #0b1734, #060a16);color:var(--ink);font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial;touch-action:manipulation}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:16px}
  .card{width:100%;max-width:900px;background:var(--panel);border:1px solid rgba(255,255,255,.12);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.45);padding:16px}
  h1{margin:0 0 8px 0;font-size:22px;text-shadow:0 0 16px rgba(98,211,255,.35)}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .pill{border:1px solid rgba(255,255,255,.25);border-radius:999px;padding:6px 10px;background:rgba(255,255,255,.06);font-size:13px}
  .btn{border:2px solid rgba(255,255,255,.6);background:transparent;color:var(--ink);padding:10px 14px;border-radius:12px;font-size:16px}
  .mut{color:var(--mut);font-size:13px}

  /* Canvas (live). If JS were blocked, nothing breaks—the page still shows content around it. */
  #live{display:block;width:100%;height:300px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#0b162b}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Aeternos — Tap to Slice</h1>

    <div class="row" style="margin:6px 0 10px 0">
      <span class="pill">Score: <b id="score">0</b></span>
      <span class="pill">FPS: <b id="fps">--</b></span>
      <span class="pill">Touches: <b id="touch">0</b></span>
      <button class="btn" id="pauseBtn" type="button">Pause</button>
      <button class="btn" id="resetBtn" type="button">Reset</button>
    </div>

    <canvas id="live" height="300"></canvas>

    <p class="mut" style="margin-top:10px">
      Tip: Tapping near a blue line “slices” it (removes it) and gives you a point.
      Use Reset to repopulate if you clear the screen.
    </p>
  </div>
</div>

<script>
(() => {
  const cvs = document.getElementById('live');
  const ctx = cvs.getContext('2d', {alpha:false});
  const scoreEl = document.getElementById('score');
  const fpsEl = document.getElementById('fps');
  const touchEl = document.getElementById('touch');
  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');

  let DPR = Math.max(1, Math.min(3, window.devicePixelRatio||1));
  function resize() {
    const w = cvs.clientWidth, h = cvs.clientHeight;
    cvs.width = Math.floor(w * DPR); cvs.height = Math.floor(h * DPR);
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  new ResizeObserver(resize).observe(cvs); resize();

  // Game state
  let paused = false;
  let t=0,last=performance.now(),frames=0,acc=0,score=0,touches=0;

  // “Lines” are little horizontal neon dashes moving left
  const lines = [];
  const fx = []; // particles on slice
  function seed() {
    lines.length = 0; fx.length = 0;
    for (let i=0;i<42;i++) {
      lines.push({
        x: Math.random() * (cvs.width/DPR),
        y: Math.random() * (cvs.height/DPR),
        w: 12 + Math.random()*10, // length
        s: 0.6 + Math.random()*1.8 // speed factor
      });
    }
    score = 0; touches = 0;
    scoreEl.textContent = '0';
    touchEl.textContent = '0';
  }
  seed();

  function step(dt) {
    if (paused) return;
    t += dt/1000;

    // Move lines left; respawn when off-screen
    const W = cvs.width/DPR, H = cvs.height/DPR;
    for (const L of lines) {
      L.x -= L.s * 40 * dt/1000;
      if (L.x < -L.w) {
        L.x = W + 20;
        L.y = Math.random()*H;
        L.w = 12 + Math.random()*10;
        L.s = 0.6 + Math.random()*1.8;
      }
    }

    // particles
    for (let i=fx.length-1;i>=0;i--) {
      const p = fx[i];
      p.x += p.vx; p.y += p.vy; p.vy += 0.15;
      p.life--;
      if (p.life<=0) fx.splice(i,1);
    }
  }

  function draw() {
    const W=cvs.width/DPR, H=cvs.height/DPR;
    // background
    const bg=ctx.createLinearGradient(0,0,0,H); bg.addColorStop(0,'#0b1734'); bg.addColorStop(1,'#091024');
    ctx.fillStyle=bg; ctx.fillRect(0,0,W,H);

    // lines
    ctx.fillStyle='rgba(98,211,255,.88)';
    for (const L of lines) {
      ctx.fillRect(L.x|0, L.y|0, L.w|0, 2);
    }

    // particles
    ctx.fillStyle='rgba(255,73,240,.95)';
    for (const p of fx) {
      ctx.fillRect(p.x|0, p.y|0, 2, 2);
    }

    // paused overlay
    if (paused) {
      ctx.fillStyle='rgba(0,0,0,.35)';
      ctx.fillRect(0,0,W,H);
      ctx.fillStyle='#eaf2ff'; ctx.font='16px -apple-system,system-ui,Segoe UI';
      ctx.fillText('Paused — tap Pause to resume', 12, 24);
    }
  }

  function loop(ts) {
    const dt = ts - last; last = ts;
    step(dt); draw();
    frames++; acc += dt;
    if (acc > 500) {
      fpsEl.textContent = String(Math.round(1000/(acc/frames)));
      frames=0; acc=0;
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  // Tap to slice: remove any line whose center is within a small radius of the tap
  function sliceAt(clientX, clientY) {
    const rect = cvs.getBoundingClientRect();
    const x = (clientX - rect.left);
    const y = (clientY - rect.top);
    const radius = 18; // hit radius in CSS pixels

    let hit = false;
    for (let i=lines.length-1;i>=0;i--) {
      const L = lines[i];
      const cx = L.x + L.w/2;
      const cy = L.y + 1; // center of the 2px line
      const dx = (cx - x), dy = (cy - y);
      if (dx*dx + dy*dy <= radius*radius) {
        // spawn particles
        for (let k=0;k<20;k++){
          fx.push({x:cx,y:cy,vx:(Math.random()-0.5)*3,vy:(Math.random()-1.2)*3,life:30});
        }
        // remove the line and immediately respawn a fresh one at the right
        const W = cvs.width/DPR, H = cvs.height/DPR;
        lines.splice(i,1);
        lines.push({ x: W + 20, y: Math.random()*H, w: 12 + Math.random()*10, s: 0.6 + Math.random()*1.8 });
        score++; scoreEl.textContent = String(score);
        hit = true;
        // continue loop to allow multi-hits per tap within radius
      }
    }
    return hit;
  }

  cvs.addEventListener('pointerdown', (e) => {
    touches++; touchEl.textContent = String(touches);
    sliceAt(e.clientX, e.clientY);
    e.preventDefault();
  }, {passive:false});

  pauseBtn.addEventListener('click', () => {
    paused = !paused;
    pauseBtn.textContent = paused ? 'Resume' : 'Pause';
  });

  resetBtn.addEventListener('click', () => {
    seed();
    paused = false;
    pauseBtn.textContent = 'Pause';
  });
})();
</script>
</body>
</html>
